<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Получи токен | TikTok Video Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            min-height: 100vh;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, #69C9D0 0%, #EE1D52 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 28px;
            font-weight: 700;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 25px;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: opacity 0.3s;
        }
        
        nav ul li a:hover {
            opacity: 0.9;
            text-decoration: underline;
        }
        
        /* Main Content */
        .main-content {
            padding: 60px 0;
        }
        
        .card {
            background-color: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .card h1 {
            font-size: 36px;
            color: #222;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .token-display {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            border: 2px dashed #69C9D0;
            position: relative;
        }
        
        .token-label {
            display: block;
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .token-value {
            font-family: monospace;
            font-size: 16px;
            word-break: break-all;
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            margin-bottom: 20px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .copy-btn {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(to right, #69C9D0, #EE1D52);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .copy-btn i {
            margin-right: 8px;
        }
        
        .info-box {
            background-color: #e8f4ff;
            border-radius: 10px;
            padding: 20px;
            margin: 25px 0;
            border-left: 4px solid #69C9D0;
        }
        
        .info-box h3 {
            color: #333;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .info-box h3 i {
            margin-right: 10px;
            color: #69C9D0;
        }
        
        .url-params {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .url-params h3 {
            color: #333;
            margin-bottom: 15px;
        }
        
        .param-item {
            display: flex;
            margin-bottom: 10px;
            padding: 10px;
            background-color: white;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
        }
        
        .param-label {
            font-weight: 600;
            color: #EE1D52;
            min-width: 120px;
        }
        
        .param-value {
            font-family: monospace;
            word-break: break-all;
        }
        
        .instructions {
            margin-top: 40px;
            padding: 25px;
            background-color: #fff8f0;
            border-radius: 10px;
            border: 1px solid #ffe0b2;
        }
        
        .instructions h3 {
            color: #e65100;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .instructions h3 i {
            margin-right: 10px;
        }
        
        .instructions ol {
            margin-left: 20px;
            margin-top: 15px;
        }
        
        .instructions li {
            margin-bottom: 10px;
            color: #555;
        }
        
        /* Footer */
        footer {
            background-color: #222;
            color: white;
            padding: 40px 0 20px;
            margin-top: 60px;
        }
        
        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        
        .footer-section {
            flex: 1;
            min-width: 250px;
            margin-bottom: 30px;
        }
        
        .footer-section h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: #69C9D0;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: #69C9D0;
        }
        
        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #444;
            color: #aaa;
            font-size: 14px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 20px;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            nav ul li {
                margin: 0 10px 10px;
            }
            
            .card {
                padding: 25px 20px;
            }
            
            .card h1 {
                font-size: 28px;
            }
            
            .token-value {
                font-size: 14px;
                padding: 10px;
            }
            
            .param-item {
                flex-direction: column;
            }
            
            .param-label {
                min-width: auto;
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-video"></i>
                    <span>TikTok Video Editor</span>
                </div>
                <nav>
                    <ul>
                        <li><a href="index.html">Главная</a></li>
                        <li><a href="privacy-policy.html">Политика конфиденциальности</a></li>
                        <li><a href="terms-of-service.html">Условия использования</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <section class="main-content">
        <div class="container">
            <div class="card">
                <h1>Получи токен для TikTok API</h1>
                
                <div class="info-box">
                    <h3><i class="fas fa-info-circle"></i> Информация</h3>
                    <p>Эта страница предназначена для получения authorization code от TikTok. Скопируйте код ниже и используйте его для получения access token.</p>
                </div>
                
                <div class="token-display">
                    <span class="token-label">Authorization Code:</span>
                    <div id="codeDisplay" class="token-value">
                        <!-- Сюда вставится код из URL -->
                        Код не найден в URL. Убедитесь что вы перешли сюда после авторизации TikTok.
                    </div>
                    
                    <button onclick="copyCode()" class="copy-btn">
                        <i class="fas fa-copy"></i> Скопировать код
                    </button>
                    <span id="copyStatus" style="margin-left: 15px; color: #666; font-size: 14px;"></span>
                </div>
                
                <div class="url-params">
                    <h3>Все параметры из URL:</h3>
                    <div id="paramsContainer">
                        <!-- Сюда добавятся все параметры -->
                    </div>
                </div>
                
                <div class="instructions">
                    <h3><i class="fas fa-list-ol"></i> Что делать дальше:</h3>
                    <ol>
                        <li>Скопируйте authorization code выше</li>
                        <li>Используйте его для получения access token через TikTok API</li>
                        <li>Для получения access token сделайте POST запрос на <code>https://open.tiktokapis.com/v2/oauth/token/</code> с параметрами:</li>
                    </ol>
                    
                    <div style="margin-top: 15px; padding: 15px; background-color: #f5f5f5; border-radius: 8px; font-family: monospace; font-size: 14px;">
                        POST /v2/oauth/token/<br>
                        Content-Type: application/x-www-form-urlencoded<br><br>
                        client_key=ВАШ_CLIENT_KEY<br>
                        client_secret=ВАШ_CLIENT_SECRET<br>
                        code=<span id="codeSample">ВАШ_КОД</span><br>
                        grant_type=authorization_code<br>
                        redirect_uri=https://ваш-сайт/callback.html
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>TikTok Video Editor</h3>
                    <p>Умные инструменты для создания и редактирования контента для TikTok. Безопасность и удобство — наш приоритет.</p>
                </div>
                <div class="footer-section">
                    <h3>Ссылки</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Главная</a></li>
                        <li><a href="privacy-policy.html">Политика конфиденциальности</a></li>
                        <li><a href="terms-of-service.html">Условия использования</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Контакты</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-envelope"></i> support@tiktokeditorapp.com</li>
                        <li><i class="fas fa-globe"></i> tiktokeditorapp.com</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 TikTok Video Editor. Все права защищены.</p>
                <p>Этот сайт и приложение не являются частью TikTok. TikTok является товарным знаком ByteDance.</p>
            </div>
        </div>
    </footer>

    <script>
        // Получаем параметры из URL
        const urlParams = new URLSearchParams(window.location.search);
        const code = urlParams.get('code');
        const scopes = urlParams.get('scopes');
        const state = urlParams.get('state');
        const error = urlParams.get('error');
        const errorDescription = urlParams.get('error_description');
        
        // Элементы DOM
        const codeDisplay = document.getElementById('codeDisplay');
        const paramsContainer = document.getElementById('paramsContainer');
        const codeSample = document.getElementById('codeSample');
        const copyStatus = document.getElementById('copyStatus');
        
        // Функция для декодирования URL (если код закодирован)
        function decodeParam(param) {
            if (!param) return '';
            try {
                return decodeURIComponent(param);
            } catch {
                return param;
            }
        }
        
        // Показываем код если он есть
        if (code) {
            const decodedCode = decodeParam(code);
            codeDisplay.textContent = decodedCode;
            codeDisplay.style.color = '#4CAF50';
            codeDisplay.style.fontWeight = '600';
            codeSample.textContent = decodedCode;
        } else if (error) {
            codeDisplay.innerHTML = `<span style="color: #f44336;">Ошибка: ${error}</span>`;
            if (errorDescription) {
                codeDisplay.innerHTML += `<br><span style="color: #666; font-size: 14px;">${decodeParam(errorDescription)}</span>`;
            }
        }
        
        // Показываем все параметры из URL
        function displayAllParams() {
            let html = '';
            
            // Добавляем все параметры которые есть в URL
            urlParams.forEach((value, key) => {
                const decodedValue = decodeParam(value);
                html += `
                    <div class="param-item">
                        <div class="param-label">${key}:</div>
                        <div class="param-value">${decodedValue}</div>
                    </div>
                `;
            });
            
            // Если параметров нет, показываем сообщение
            if (!html) {
                html = '<p style="color: #666; text-align: center;">Параметры не найдены в URL</p>';
            }
            
            paramsContainer.innerHTML = html;
        }
        
        // Функция копирования кода
        function copyCode() {
            if (!code) {
                copyStatus.textContent = '❌ Нет кода для копирования';
                copyStatus.style.color = '#f44336';
                return;
            }
            
            const decodedCode = decodeParam(code);
            
            // Создаем временный элемент для копирования
            const tempInput = document.createElement('textarea');
            tempInput.value = decodedCode;
            document.body.appendChild(tempInput);
            tempInput.select();
            
            try {
                // Пробуем скопировать
                const successful = document.execCommand('copy');
                
                if (successful) {
                    copyStatus.textContent = '✅ Код скопирован в буфер обмена!';
                    copyStatus.style.color = '#4CAF50';
                    
                    // Сбрасываем статус через 3 секунды
                    setTimeout(() => {
                        copyStatus.textContent = '';
                    }, 3000);
                } else {
                    copyStatus.textContent = '❌ Не удалось скопировать';
                    copyStatus.style.color = '#f44336';
                }
            } catch (err) {
                copyStatus.textContent = '❌ Ошибка при копировании';
                copyStatus.style.color = '#f44336';
                console.error('Ошибка копирования:', err);
            }
            
            // Удаляем временный элемент
            document.body.removeChild(tempInput);
        }
        
        // Функция для генерации примера запроса
        function generateExampleRequest() {
            if (!code) return;
            
            // Можно добавить генерацию curl запроса
            const curlCommand = `curl -X POST 'https://open.tiktokapis.com/v2/oauth/token/' \\
  -H 'Content-Type: application/x-www-form-urlencoded' \\
  -d 'client_key=ВАШ_CLIENT_KEY&client_secret=ВАШ_CLIENT_SECRET&code=${decodeParam(code)}&grant_type=authorization_code&redirect_uri=https://ваш-сайт/callback.html'`;
            
            console.log('Пример curl запроса:', curlCommand);
        }
        
        // При загрузке страницы
        document.addEventListener('DOMContentLoaded', () => {
            displayAllParams();
            generateExampleRequest();
            
            // Если есть код, фокусируемся на нем
            if (code) {
                console.log('✅ Authorization code получен!');
                console.log('Code:', decodeParam(code));
                console.log('Scopes:', scopes);
                console.log('State:', state);
                
                // Автоматически выделяем код для удобства копирования
                setTimeout(() => {
                    codeDisplay.style.border = '2px solid #69C9D0';
                    setTimeout(() => {
                        codeDisplay.style.border = '1px solid #e0e0e0';
                    }, 1000);
                }, 500);
            }
        });
        
        // Копирование по нажатию Ctrl+C на элементе с кодом
        codeDisplay.addEventListener('click', function() {
            if (code) {
                copyCode();
            }
        });
        
        // Горячие клавиши
        document.addEventListener('keydown', function(e) {
            // Ctrl+C или Cmd+C
            if ((e.ctrlKey || e.metaKey) && e.key === 'c') {
                if (document.activeElement === codeDisplay || codeDisplay.contains(document.activeElement)) {
                    copyCode();
                }
            }
        });
    </script>
</body>
</html>
